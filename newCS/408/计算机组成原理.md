#     计算机组成原理

## 1.计算机系统概述

### 1. 计算机发展历程

![image-20220124155140426](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124155140426.png)

### 2.计算机系统的组成

- 冯诺依曼体系结构：以运算器为核心

![image-20220124155439445](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124155439445.png)

- 冯诺依曼体系结构的特点

![image-20220124163921396](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124163921396.png)

- 现在计算机体系结构：以内存为核心

![image-20220124155514424](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124155514424.png)

- CPU，主机，外设

![image-20220124155601121](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124155601121.png)

### 3.存储器

- 主存储器由存储体，MAR，MDR组成
- 和右边的图进行类比，MAR存储CPU想要获取数据的地址，在存储体中找到后放在MDR中，CPU从MDR中把数据取走。

![image-20220124161217722](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124161217722.png)

- 存储体是由一个个存储单元组成的

- ==存储字：存储单元中二进制代码的集合==

- ==存储字长：存储单元中二进制代码的位数==

  

![image-20220124161625621](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124161625621.png)

### 4.运算器

![image-20220124162029858](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124162029858.png)

### 5. 控制器

![image-20220124162149845](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124162149845.png)

### 6. 计算机的工作过程（重点）

- 程序被编译成二进制存储在主存中

![image-20220124162251737](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124162251737.png)

>工作过程

- （MAR）：表示MAR里边的值为0

- M(MAR) ：主存储器所指向的存储单元里边的值
- OP（IR）：取操作码
- Ad（IR）：取地址码

![image-20220124162438267](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124162438267.png)

![image-20220124163303409](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124163303409.png)

### 7. 计算机的层次结构

![image-20220124164821189](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124164821189.png)

- 注意编译程序和解释程序的区别

编译程序:将高级语言编写的源程序全部语句一次全部翻译成机器语言程序，而后再执行机器语言程序（只需翻译一次)

解释程序将源程序的一条语句翻译成对应于机器语言的语句，并立即执行。紧接着再翻译下一句(每次执行都要翻译)

![image-20220124164939418](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124164939418.png)

### 8.计算机的性能指标

#### 1. 存储器

![image-20220124165253241](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124165253241.png)

#### 2. CPU



![image-20220124170445476](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124170445476.png)



![image-20220124170634769](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124170634769.png)

#### 3.系统整体的性能指标

![image-20220124170834659](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124170834659.png)

#### 4. 思考

![image-20220124171228641](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124171228641.png)

## 2. 数据的表示和运算

### 1.进位计数制

- 其他进制转十进制

![image-20220124172254378](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124172254378.png)

- 二进制<——> 八进制，十六进制  (注意：小数部分也是从右往左算)

![image-20220124172619709](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124172619709.png)

- 十进制——>任意进制（整数部分）

![image-20220124192353762](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124192353762.png)

- 十进制——>任意进制（小数部分）

![image-20220124192439652](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124192439652.png)

- 十进制转二进制（拼凑法，适用于十进制数不是很大的情况）

![image-20220124192728894](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124192728894.png)

- 真值和机器数

![image-20220124192704256](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220124192704256.png)

### 2.BCD码

- 概念

![image-20220126171803519](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126171803519.png)

- 8421码

![image-20220126171920070](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126171920070.png)

- 8421码相加

1. 可以转换成十进制相加后，再转换成8421码
2. 机算方法：不在范围内，加6。如图所示

![image-20220126172432712](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126172432712.png)

- 其他表示方式

![image-20220126174706248](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126174706248.png)

### 3. 字符与字符串

- ASCII码

![image-20220126180204687](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126180204687.png)

- 汉字的表示和编码

![image-20220126180314162](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126180314162.png)

- 字符串的表示形式

![image-20220126180403191](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126180403191.png)

- 知识回顾

![image-20220126180437047](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126180437047.png)

### 4.奇偶校验码

- 校验原理

![image-20220126180907544](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126180907544.png)

（首部或尾部）新增一位编码，有8种状态，只有四种合法

- 奇偶校验码

![image-20220126181124538](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126181124538.png)

> 当编码传输的过程中有奇数个bits出错了，如果是奇（偶）校验方式，则检查编码是否满足奇（偶）数个，不满足则判定出错。
>
> 如果有偶数个bits出错，那么奇偶校验码则**失效**

- 硬件实现

![image-20220126192604899](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126192604899.png)

> **异或（也称模二加）：相异为1，相同为0**

缺点：无法确定是哪一位出错了，因为1bits只能携带2种状态信息（对/错）

### 5.海明码

- 设计思想：分成k组，每组都有一个校验位

![image-20220126192014802](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126192014802.png)

> 多个校验位能携带多种状态信息（对/错，错在哪）

- 求解步骤

![image-20220126195838236](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126195838236.png)

> 1. 确认海明码的位数
> 2. 确定校验位的分布（1、2、4、8、16...）
> 3. **求解校验位的值**

![image-20220126193248739](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126193248739.png)

- 全校验

1. 海明码只能纠错一位（一个数据传错时，可以纠正）
2. 可以检错两位

![image-20220126195918658](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126195918658.png)

### 6. 循环冗余校验码（CRC码）

- 基本思想

![image-20220126200208426](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126200208426.png)

- 例题

  ![image-20230327133214047](https://picgo-picture-storage.oss-cn-guangzhou.aliyuncs.com/img/image-20230327133214047.png)

  - 检查和纠错

    ![image-20220126202544654](https://picgo-picture-storage.oss-cn-guangzhou.aliyuncs.com/img/image-20220126202544654.png)

- CRC校验码计算过程

![image-20220126202718290](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220126202718290.png)

> 为什么循环冗余校验码叫循环冗余校验码？
>
> ![1680314691601](https://picgo-picture-storage.oss-cn-guangzhou.aliyuncs.com/img/1680314691601.png)
>
> 如果对余数进行运算（用1101进行模2除），那么余数将会在001~110之间循环

### 7. 定点数的表示

- 定点数和浮点数的概念

![image-20220127144253289](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127144253289.png)

- 无符号数

![image-20220127144714178](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127144714178.png)

- 原码

![image-20220127145309171](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127145309171.png)

> 真值`0`有 `[+0]` 和 `[-0]` 两种表达形式

- 反码

![image-20220127145448551](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127145448551.png)

> 真值`0`有 `[+0]` 和 `[-0]` 两种表达形式
>
> 反码只是原码转补码的中间状态

- 补码(高频考点)

![image-20220127150050213](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127150050213.png)

> - 整数：补码整数比原码和反码多表示一个复数$$ -2^7 $$
>
> - 小数：补码小数比原码和反码多表示一个$$-1$$
>
>   推导过程：$$[+0]_原$$=0.0000000，$$[-0]_原$$=1.0000000
>
>   ​                    $$[+0]_反$$=0.0000000，$$[-0]_反$$=1.1111111
>
>   $$[+0]_补$$=$$[-0]_补$$=0.0000000
>
>   使用多出来的$$[x]_补$$=1.0000000表示$$-1$$


- 移码

  > 补码的**符号位**取反

![image-20220127150230867](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127150230867.png)

> 很方便的比较整数之间的大小

![1677981461635](../408-image/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/1677981461635.png)

- 技巧

![image-20220127150633042](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127150633042.png)

- 补码的作用（注意：==执行加法运算时，符号位一起参加运算==）

![image-20220127152758634](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127152758634.png)

### 8.移位运算

- 原码的算数移位

![image-20220127153359639](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127153359639.png)

> 符号位保持不变

- 反码的算数移位

![image-20220127153607298](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127153607298.png)

> 需要注意的是，负数的反码，左右移时要补1，正数不用

- 补码的算数移位

![image-20220127153830245](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127153830245.png)

- **总结**

![image-20220127153942017](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127153942017.png)

- 逻辑移位

![image-20220127154131912](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127154131912.png)

> 带进位位的循环左移
>
> ![image-20230329163131243](https://picgo-picture-storage.oss-cn-guangzhou.aliyuncs.com/img/image-20230329163131243.png)
>
> 循环移位的好处：将高字节和低字节进行调换（大端存储：高->低；小端存储：低->高）

### 9. 加减运算和溢出判断和符号扩展

- 原码的加减运算

![image-20230329175936938](https://picgo-picture-storage.oss-cn-guangzhou.aliyuncs.com/img/image-20230329175936938.png)

> 注意！！正数转负数时，有如下步骤：
>
> 1. 符号位改为1
> 2. 除了符号位全部取反
> 3. 对步骤2的结果+1
>
> 这样就得到了正转负，负转正就倒过来就好了

- 补码的加减运算（更加方便，无需考虑符号位的问题）

![image-20230329182428305](https://picgo-picture-storage.oss-cn-guangzhou.aliyuncs.com/img/image-20230329182428305.png)

- 溢出判断

![image-20220127161103371](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127161103371.png)

> - 只有正数+正数才会**上溢**——正+正=负
> - 只有负数+负数才会**下溢**——负+负=正
> - 解释模4补码（双符号位补码）的由来，看11,1110111前两位符号位，第一位是$2^0$，第二位是$2^1$，再往前就是4了，所以模4补码就是这么来的。同样的模2补码也是这样

- 符号扩展

![image-20220127161325545](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127161325545.png)

### 10.原码乘法运算

- 机器实现（视频 P18节）

![image-20220127163743939](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127163743939.png)

> ACC与MQ相互配合，下面模拟运算过程
>
> 1. 参考MQ第1位，用第1位与X（被乘数）相乘，将值加到ALU当中
> 2. 在进行下一步乘法时，将ACC和MQ的内容统一右移——逻辑右移（**因为之前的第1位运算过了，所以没用了，刚好可以用来进位**），然后再重复第1步的操作
> 3. 当到达符号位时，停止运算，红色部分可称为"部分积"，注意此时已经算出结果
>
> 数值位有n位，就重复n次操作
>
> 4. 别忘了现在算的只是数值位，还需要将$x,y$的符号位进行异或得到的数修改为符号位
> 5. 这样就得到了最终的值
>
> 所以为什么ACC被称为乘积高位，MQ被称为乘积低位，现在就能理解了

### 11.补码乘法运算（Booth算法）

- 机器实现

![image-20220127215747197](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127215747197.png)

> 实际上MQ的最低位是辅助位，这里为了与原码乘法统一，假定最低位是第1位
>
> 实际上ACC和X都有多一位，这一位可以用来表示双符号位的补码

- 手算步骤

![image-20220127215810158](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220127215810158.png)

> 下面给出运算步骤：
>
> 1. 确定被乘数，这里是x
> 2. 先算出$[x]_补、[-x]_补、[y]_补$
> 3. 按照上图左侧的样子摆出，注意添加辅助位，以及多出来的符号位，开始运算。
> 4. 查找到MQ中最低位为1，通过上图右侧的法则，辅助位-MQ最低位
> 5. 再进行相加（$[x]_补、0、[-x]_补$）
> 6. 相加之后进行算数右移（法则也在上图左侧）
> 7. 重复4~6的步骤，直到末位，注意最后原先的符号位也会参与运算（在上图中是`1-0`），**还要进行一次加法，但是不用算数右移！**

### 12.原码除法运算

> **首先明确一点：符号位单独确定，不会参与到运算中**（待会在补码的除法中会看到，符号位参与运算中）

- 机器运算过程（恢复余数法）

![image-20220128125621231](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128125621231.png)

[todo][]这里的10110-01101在原码减法运算和补码减法运算所得完全不同，所以有待深究吧！

> 同样的，我们再次模拟运算过程
>
> 1. 不管三七二十一，先商1，如果此时符号位为1，判定出错，进行恢复，恢复方式就是将先前减去的除数再加回来，并且商0
>
>    ![1680097228593](https://picgo-picture-storage.oss-cn-guangzhou.aliyuncs.com/img/1680097228593.png)
>
> 2. 下一步进行相减操作（怎么减的）
>
> 3. 为了产生新的余数（就是处理"步骤2"减完之后的数），**将ACC和MQ统一逻辑左移**，**在ACC高位丢弃，在MQ的低位补0（注意这里不同于十进制，是都要补0！）**，形成新的数
>
> 4. 类似步骤123，重复直到商为机器字长的个数（含符号位）
>
> **注：若最后一步商余数为负，也需要恢复余数并商0**

- 恢复余数法

![image-20220128131154037](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128131154037.png)

> 运算步骤：上图右侧
>
> 要注意的是，左移n次（这里的n是**机器字长-1**），上商n+1次，最后一次上商不左移

- 加减交替法（恢复余数太麻烦了，新方法，不恢复余数！）

> 新方法的步骤：
>
> 当算到余数a为负时，无需恢复，直接继续进行运算，让余数左移（*2）再加上除数b（这里为什么要加而不是减，是因为判断了余数的正负，正就减，负就加）
>
> **如果最后得到的余数是负值，那么需要恢复并商0！**
>
> ![image-20230330191921828](https://picgo-picture-storage.oss-cn-guangzhou.aliyuncs.com/img/image-20230330191921828.png)

![image-20220128131225276](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128131225276.png)

> 在这里讨论的是定点小数的除法运算，得到的商也是一个定点小数，因此规定：**被除数需要小于除数**（如果被除数大于除数，就会出现商大于1的情况，而定点小数无法表示大于1的数）。**硬件通过第一步的商确定是否满足上述规定**，如果第1步得到的是正值，那么就违反了规定，所以第一步肯定得到的是负值，商0

### 13.补码除法运算

> **注意此时符号位会直接参与到运算中**，所以此时要求的是$[x]_补、[y]_补、[-y]_补$，不同于原码除法，并且**采用双符号位！**

![image-20220128130246826](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128130246826.png)

> 运算步骤：
>
> 1. 检查**被除数和除数是否同号**，同号就减去除数，异号就加上除数
> 2. 现在进行相加，得到新的余数，每当得到新余数的时候，根据**余数和除数是否同号**，同号商1，并且左移一位，减去除数（此时的被除数就是新余数），异号商0，左移一位，加上除数
> 3. 重复上述步骤n次（机器字长-1）
>
> 可以通过上图左侧进行验证
>
> 注意：**末位商恒置为1**（不管算得0还是1），无需恢复余数！

- 除法运算总结回顾

![image-20230330200050053](https://picgo-picture-storage.oss-cn-guangzhou.aliyuncs.com/img/image-20230330200050053.png)

> 由于原码加减交替法最终有可能需要恢复余数，所以会出现N+2的情况

### 14.强制类型转换

> 有三种方式：
>
> 1. **无符号数与有符号数**：不改变数据内容，改变解释方式
> 2. **长整数变短整数**：高位截断，保留低位
> 3. **短整数变长整数**：符号扩展

![image-20220128131830289](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128131830289.png)

### 15.数据的存储和排列

- 大小端模式

![image-20220128132209812](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128132209812.png)

> 大端：低到高
>
> 小端：高到低

- 边界对齐

![image-20220128141621511](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128141621511.png)

### 16. 浮点数的表示

- 浮点数的表示（在位数不变的情况下增加数据的表示范围）


![image-20220128144507292](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128144507292.png)

- 尾数的规格化

> - 尾数的最高位是无效值，会损失精度
>
> - **浮点数规格化形式：规定尾数的最高数位必须是一个有效值**

![image-20220128144600960](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128144600960.png)

注：上述题目尾数的符号位有两位

> 原码和补码表示的尾数规格化各不相同
>
> 原码：正数、负数最高位都表示为`1`
>
> 补码：整数最高位表示为`1`，负数最高位表示为`0`

![image-20220128144703337](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128144703337.png)

- 浮点数的移码表示法

  $$[X]_移$$ = 偏置值 + $X$

> 不同的机器数有不同的规格化形式

### 17. IEEE 754 浮点数标准

- 标准

![image-20220128145831536](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128145831536.png)

- 示例（十进制转换为浮点数）

![image-20220128150220191](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128150220191.png)

- 示例（浮点数转换为十进制数）

![image-20220128150436743](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128150436743.png)

- 单精度浮点数表示的最大值，最小值

![image-20220128150646292](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128150646292.png)

- 特殊数值 

![image-20220128151026706](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128151026706.png)

### 18.浮点数的运算

- 和十进制的科学计数法进行类比

![image-20220128152136960](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128152136960.png)

- 浮点数加减法（P26）

![image-20220128154425894](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128154425894.png)

- 舍入

![image-20220128155152407](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128155152407.png)

- 强制类型转换

![image-20220128155130204](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128155130204.png)

### 19. 电路的基本原理

- 基本的逻辑运算

![image-20220128160058822](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128160058822.png)

- 复合逻辑

![image-20220128160542357](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220128160542357.png)

## 3.存储系统

### 1. 主存简单模型和寻址概念

- 存储器芯片的基本结构

![image-20220130152344905](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130152344905.png)

- 寻址

![image-20220130153001312](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130153001312.png)

### 2.存储器RAM

- 两种RAM的比较

![image-20220130154140182](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130154140182.png)

- DRAM的刷新![image-20220130154625070](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130154625070.png)

![image-20220130155833007](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130155833007.png)

### 3.ROM(只读存储器)

- 为什么需要ROM？

因为RAM里面的数据容易丢失。

![image-20220130160929183](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130160929183.png)

### 4.存储器基本概念

- 存储器的分类

![image-20220130161242889](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130161242889.png)

![image-20220130161406470](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130161406470.png)

- 性能指标

数据的宽度：在一个存储周期中存储的位数

![image-20220130161648937](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130161648937.png)

- 层次化结构

![image-20220130161822725](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130161822725.png)

### 5. 主存与CPU的连接

- CS：片选线（决定主存是否工作）这种写法是高电平有效
- WE：读写控制线
- A0~A13：地址线
- D0~D7：数据线 

![image-20220130162636865](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130162636865.png)

- 译码器

![image-20220130163242147](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130163242147.png)

- 线选法和译码线选法的区别

![image-20220130164058401](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130164058401.png)

### 6.主存与CPU的连接（例题）

- 分析

![image-20220130165155365](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130165155365.png)

- 图解

![image-20220130165622310](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130165622310.png)

### 7.双端口RAM和多模块存储器

- 双端口RAM

![image-20220130170115628](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130170115628.png)

- 多模块存储器

![image-20220130170354942](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130170354942.png)

- 高位交叉编址和低位交叉编址

![image-20220130171004832](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130171004832.png)

- 流水线问题

![image-20220130171717868](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130171717868.png)

### 8.局部性原理及性能分析

- 局部性原理

![image-20220130173154035](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130173154035.png)

- 性能分析

![image-20220130173324687](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130173324687.png)

- 例题（蓝色字体为答案）

![image-20220130173700544](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220130173700544.png)

### 9. Cache 地址映射

- Cache的工作原理

![image-20220131103221888](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131103221888.png)

- 地址映射——全相连映射

![image-20220131103738879](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131103738879.png)

- 地址映射——直接映射

![image-20220131104100785](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131104100785.png)

- 地址映射——组相连映射

![image-20220131104445504](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131104445504.png)

### 10.cache替换算法及写策略

- 替换算法

LRU侧重于近期表现，LFU侧重于全局表现

![image-20220131105043802](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131105043802.png)

- 例题

![image-20220131110126624](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131110126624.png)

- 命中时的写策略

1. 写回法

![image-20220131110455683](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131110455683.png)

2. 全写法

![image-20220131110555484](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131110555484.png)

- 未命中时的写策略

1. 写分配法

![image-20220131110657919](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131110657919.png)

2. 非写分配法

![image-20220131110744533](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131110744533.png)

### 11. 虚拟存储器

- 概念

![image-20220131111953580](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131111953580.png)

- 页式虚拟存储器

![image-20220131112322122](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131112322122.png)

- 段式虚拟存储器

![image-20220131112408107](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131112408107.png)

- 段页式虚拟存储器

![image-20220131112443405](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131112443405.png)

- 快表

![image-20220131112516038](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131112516038.png)

## 4.指令系统

### 1.指令格式

- 指令的含义

![image-20220131112840832](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131112840832.png)

- 指令的格式

![image-20220131113124046](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131113124046.png)

- 地址码

![image-20220131113711077](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131113711077.png)

- 扩展操作码举例

![image-20220131114025995](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131114025995.png)

- 扩展操作码的规范

![image-20220131114229234](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131114229234.png)

- 指令操作码

![image-20220131114639178](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131114639178.png)

- 操作类型

![image-20220131114747086](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131114747086.png)

### 2.指令寻址

- 数据存放

![image-20220131115415882](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131115415882.png)

- 指令寻址

![image-20220131120018553](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220131120018553.png)

### 3.数据寻址1

- 操作数类型

![image-20220203160315336](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203160315336.png)

- 地址码的构成

寻址特征：采用哪一种方式进行寻址

**通过寻址特征和形式地址求出有效地址**

![image-20220203160601853](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203160601853.png)

- 立即寻址

![image-20220203160950788](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203160950788.png)

- 直接寻址

![image-20220203161136445](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203161136445.png)

- 间接寻址

![image-20220203161401565](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203161401565.png)

- 寄存器寻址

![image-20220203161526792](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203161526792.png)

- 寄存器间接寻址

![image-20220203161628168](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203161628168.png)

- 隐含寻址

![image-20220203161742257](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203161742257.png)

- 总结

![image-20220203161816204](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203161816204.png)

### 4.数据寻址2——偏移寻址

- 基址寻址

![image-20220203162240926](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203162240926.png)

- 变址寻址

![image-20220203163048908](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203163048908.png)

- 相对寻址

![image-20220203163432186](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203163432186.png)

- 相对寻址举例

![image-20220203164528487](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203164528487.png)

- 总结

![image-20220203164700915](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203164700915.png)

### 5. 数据寻址——堆栈寻址

![image-20220203165103334](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203165103334.png)

### 6.CISC和RISC

- 基本含义

![image-20220203165740882](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203165740882.png)

- 特点

![image-20220203165907312](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220203165907312.png)

## 5.中央处理器

### 1.CPU功能和基本结构

- CPU的功能

![image-20220204141306234](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204141306234.png)

- 运算器和控制器的功能

![image-20220204141524507](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204141524507.png)

- 运算器的基本结构

![image-20220204142113636](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204142113636.png)

![image-20220204142656159](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204142656159.png)

- 控制器的基本结构

![image-20220204143337083](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204143337083.png)

- CPU的基本结构

![image-20220204143620270](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204143620270.png)

### 2.指令周期的数据流

- 指令周期

![image-20220204143912635](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204143912635.png)

- 指令周期流程

![image-20220204144244474](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204144244474.png)

- 取指周期

![image-20220204144352993](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204144352993.png)

- 间址周期

![image-20220204144727112](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204144727112.png)

- 中断周期

![image-20220204145045629](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204145045629.png)

- 指令执行方案

![image-20220204145230729](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204145230729.png)

### 3. 数据通路1——CPU内部单总线通路

- 数据通路

![image-20220204145502071](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204145502071.png)

- CPU内部单总线方式

在介绍这个之前，首先区别一下系统总线和内部总线。

**内部总线**是指同一部件，如CPU内部连接各寄存器及运算部件之间的总线;

**系统总线**是指同一台计算机系统的各部件，如CPU、内存、通道和各类l/o接口间互相连接的总线。

![image-20220204150409836](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204150409836.png)

- 例题

> 取指周期

![image-20220204150745077](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204150745077.png)

> 间址周期

![image-20220204151034301](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204151034301.png)

> 执行周期

![image-20220204151252258](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204151252258.png)

### 4. 数据通路2——专用数据通路

- 取指周期

![image-20220204151703479](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204151703479.png)

- 例题

> 第一问

![image-20220204151933329](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204151933329.png)

> 第二问

![image-20220204152000380](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204152000380.png)

> 第三问

![image-20220204152313291](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204152313291.png)

> 第四问

![image-20220204152446588](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204152446588.png)

> 第五问

![image-20220204152550115](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204152550115.png)

> 第六问

![image-20220204152634574](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204152634574.png)

### 5. 控制器1——硬布线

- 控制器的结构和功能

![image-20220204155824810](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204155824810.png)

- 控制单元的输入和输出

![image-20220204155733033](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204155733033.png)

- CPU的控制方式

![image-20220204155634351](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204155634351.png)

### 6.控制器2——微程序

- 控制器的设计思路

![image-20220204160400055](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220204160400055.png)

- 微程序的基本思想

![image-20220205121414411](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205121414411.png)

- 微程序控制器的基本结构

![image-20220205121747933](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205121747933.png)

- 控制存储器

![image-20220205122032395](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205122032395.png)

- 微指令的格式

![image-20220205122525266](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205122525266.png)

- 微指令的编码方式

![image-20220205134043538](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205134043538.png)

![image-20220205134142489](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205134142489.png)

- 微指令的地址形成方式

前两种理解，后四种了解（不重要） 

![image-20220205134325290](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205134325290.png)

- 下地址方式例题

![image-20220205135318575](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205135318575.png)

- 一些易混淆的概念

**指令=微程序**

**微程序由多个微指令组成**

**微指令由多个微命令组成**

**微命令是微操作的控制信号**

**微操作是微命令的执行过程**

![image-20220205135623551](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205135623551.png)

### 7.指令流水线的概念及性能指标

- 指令流水的定义

![image-20220205140219456](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205140219456.png)

![image-20220205140757971](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205140757971.png)

- 流水线的表示方法

![image-20220205140709591](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205140709591.png)

- 流水线的性能指标

1. 吞吐率

![image-20220205141557742](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205141557742.png)

2. 加速比

![image-20220205141822268](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205141822268.png)

3. 效率

![image-20220205142015561](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205142015561.png)

### 8.影响流水线的因素及分类

- 机器周期的设置

![image-20220205142525993](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205142525993.png)

- 影响流水线的因素

1. 结构相关

![image-20220205142420789](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205142420789.png)

2. 数据相关

![image-20220205142724384](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205142724384.png)

- 例题

![image-20220205143035517](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205143035517.png)

- 数据相关的一些概念

RAW（read after write）：写后读

另外两个同上

![image-20220205143316267](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205143316267.png)

3. 控制相关

![image-20220205143549521](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205143549521.png)

- 总结

![image-20220205143611590](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205143611590.png)

- 流水线的分类

![image-20220205143705278](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205143705278.png)

![image-20220205143723927](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205143723927.png)

- 流水新的多发技术

1. 超标量技术

![image-20220205143838745](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205143838745.png)

2. 超流水技术

![image-20220205143937880](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205143937880.png)

3. 超长指令字

![image-20220205144032581](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220205144032581.png)

## 6.总线

### 1.总线的概念和分类

- 总线的特点

![image-20220206132533972](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220206132533972.png)

- 总线特性

![image-20220206132827567](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220206132827567.png)

- 总线的分类

![image-20220207135755282](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207135755282.png)

- 串行总线与并行总线

![image-20220207135911160](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207135911160.png)

- 按总线功能

![image-20220207145722749](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207145722749.png)

- 系统总线的结构

1. 单总线结构

![image-20220207150008889](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207150008889.png)

2. 双总线结构

![image-20220207150221254](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207150221254.png)

3. 三总线结构

![image-20220207150904024](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207150904024.png)

### 2.性能指标

![image-20220207151751475](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207151751475.png)

![image-20220207152007687](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207152007687.png)

![image-20220207152906097](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207152906097.png)

- 带宽例题

![image-20220207152737201](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207152737201.png)

- 上节遗留问题：串行总线和并行总线哪个速度更快

![image-20220207152646974](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207152646974.png)

- 总结

![image-20220207153237319](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207153237319.png)

### 3. 总线仲裁

- 基本特点

![image-20220207153156272](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207153156272.png)

- 集中仲裁方式（重要）

1. 链式查询方式

![image-20220207153710538](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207153710538.png)

2. 计数器查询方式

![image-20220207154102188](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207154102188.png)

3. 独立请求方式

![image-20220207154404507](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207154404507.png)

- 三种方式总结

![image-20220207154449055](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207154449055.png)

- 分布仲裁方式（了解即可）

![image-20220207154559945](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207154559945.png)

### 4. 总线操作和定时

- 总线传输的四个阶段

![image-20220207160527516](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207160527516.png)

- 同步定时方式

![image-20220207160831129](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207160831129.png)

- 异步定时方式

![image-20220207161255282](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207161255282.png)

![image-20220207161158530](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207161158530.png)

- 例题（数据传输率）

![image-20220207161520965](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207161520965.png)

- 半同步通信（扩展）

![image-20220207161625989](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207161625989.png)

- 分离式通信（拓展）

![image-20220207161715786](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207161715786.png)

### 5. 总线标准

- 基本特点

![image-20220207162010796](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207162010796.png)

## 7. 输入输出系统

### 1. IO系统基本概念

- 演变过程

![image-20220207163204606](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207163204606.png)

- IO系统基本组成

![image-20220207163129561](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207163129561.png)

- IO方式简介

![image-20220207163711678](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220207163711678.png)

### 2. 输入输出

- 外部设备

![image-20220208134546442](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208134546442.png)

- 显示器

![image-20220208135025276](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208135025276.png)

### 3. 外存储器

- 基本概念

![image-20220208135334706](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208135334706.png)

- 磁盘存储器

1. 磁盘设备的组成

![image-20220208135742975](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208135742975.png)

2. 性能指标

![image-20220208140554007](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208140554007.png)

3. 存取时间计算过程

![image-20220208140315461](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208140315461.png)

4. 磁盘地址和磁盘的工作过程

![image-20220208140835206](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208140835206.png)

### 4. IO接口

- 功能

![image-20220208141144133](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208141144133.png)

- 基本结构

![image-20220208141543148](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208141543148.png)

- 接口与端口

![image-20220208141723953](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208141723953.png)

- IO端口及其编址

![image-20220208142103849](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208142103849.png)

- IO接口的类型

![image-20220208142227284](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208142227284.png)

### 5. 程序查询方式

- 程序查询方式流程图

![image-20220208143347520](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208143347520.png)

- 接口结构

![image-20220208143536105](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208143536105.png)

- 例题

![image-20220208144328807](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208144328807.png)

- 总结

![image-20220208144140914](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208144140914.png)

### 6. 中断系统

- 基本概念

![image-20220208144639975](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208144639975.png)

- 分类

![image-20220208144748709](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208144748709.png)

- 中断请求标记

![image-20220208144954465](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208144954465.png)

- 中断判优

![image-20220208145216623](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208145216623.png)

- 优先级设置

![image-20220208145242843](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208145242843.png)

- 中断处理过程

![image-20220208145431043](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208145431043.png)

- 中断隐指令

![image-20220208145809520](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208145809520.png)

- 中断服务程序

![image-20220208145920443](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208145920443.png)

- 单重中断和多重中断

![image-20220208150150476](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208150150476.png)

- 中断屏蔽技术

![image-20220208150354883](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208150354883.png)

- 中断屏蔽技术 例题（重要，需掌握）

![image-20220208150716402](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208150716402.png)

### 7. 程序中断方式

- 程序中断方式过程

恢复现场即算做下一次启动

![image-20220208151033847](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208151033847.png)

- 例题 第一问

![image-20220208151244322](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208151244322.png)

- 例题 第二问 （重要）

CPI：执行一条指令所需要的时钟周期

![image-20220208151751342](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208151751342.png)

### 8. DMA方式

- DMA 控制器

![image-20220208152102933](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208152102933.png)

- 结构

![image-20220208152326186](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208152326186.png)

- DMA传送方式

![image-20220208152619958](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208152619958.png)

- DMA方式的特点

![image-20220208152708447](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208152708447.png)

- DMA方式与中断方式对比

![image-20220208152756433](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208152756433.png)

- CPU占用情况 中断方式

![image-20220208153306469](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208153306469.png)

- CPU占用情况 DMA方式

![image-20220208153659050](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208153659050.png)

- 总结

![image-20220208153841685](https://typora-dzsq.oss-cn-hangzhou.aliyuncs.com/picgoimages-master/img/image-20220208153841685.png)
